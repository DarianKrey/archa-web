<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archa | Your Life, Printed in Ink</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --aegean: #0E2A3A;
            --sand: #F4F1EA;
            --gold: #C5A059;
            --gold-light: #d4b878;
            --charcoal: #1a1a1a;
            --serif: 'Playfair Display', Georgia, serif;
            --sans: 'Lato', -apple-system, sans-serif;
        }
        *, *::before, *::after { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: var(--sans);
            font-weight: 400;
            font-size: 1rem;
            line-height: 1.6;
            color: var(--charcoal);
            background: var(--sand);
        }
        .section { padding: 80px 24px; max-width: 1200px; margin: 0 auto; }
        @media (max-width: 768px) { .section { padding: 56px 20px; } }

        /* ----- Hero ----- */
        .hero {
            position: relative;
            min-height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--aegean) url('https://images.unsplash.com/photo-1512820790803-83ca734da794?w=1920&q=80') center / cover no-repeat;
            text-align: center;
            color: #fff;
        }
        .hero::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(14,42,58,0.85) 0%, rgba(14,42,58,0.4) 50%, rgba(14,42,58,0.2) 100%);
            pointer-events: none;
        }
        .hero-inner { position: relative; z-index: 1; padding: 40px 24px; max-width: 720px; }
        .hero h1 {
            font-family: var(--serif);
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 500;
            margin: 0 0 20px;
            letter-spacing: -0.02em;
            line-height: 1.15;
        }
        .hero .subhead {
            font-size: clamp(1rem, 2.2vw, 1.25rem);
            font-weight: 300;
            opacity: 0.95;
            margin: 0 0 36px;
            line-height: 1.5;
        }
        .hero-ctas { display: flex; flex-wrap: wrap; gap: 16px; justify-content: center; align-items: center; }
        .btn-primary {
            display: inline-block;
            padding: 16px 32px;
            background: var(--gold);
            color: #fff;
            font-family: var(--sans);
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            text-decoration: none;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s, transform 0.2s;
        }
        .btn-primary:hover { background: var(--gold-light); transform: translateY(-1px); }
        .btn-secondary {
            display: inline-block;
            padding: 16px 28px;
            background: transparent;
            color: #fff;
            font-family: var(--sans);
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            text-decoration: none;
            border: 2px solid rgba(255,255,255,0.7);
            border-radius: 4px;
            transition: border-color 0.2s, color 0.2s;
        }
        .btn-secondary:hover { border-color: #fff; color: #fff; }

        /* ----- Why ----- */
        .why { background: var(--sand); }
        .why .section-title {
            font-family: var(--serif);
            font-size: clamp(1.75rem, 3.5vw, 2.5rem);
            font-weight: 500;
            color: var(--aegean);
            margin: 0 0 24px;
            text-align: center;
        }
        .why .section-copy {
            max-width: 640px;
            margin: 0 auto;
            text-align: center;
            font-size: 1.1rem;
            color: #444;
        }

        /* ----- How it works ----- */
        .how { background: #fff; }
        .how .section-title {
            font-family: var(--serif);
            font-size: clamp(1.75rem, 3.5vw, 2.5rem);
            font-weight: 500;
            color: var(--aegean);
            margin: 0 0 48px;
            text-align: center;
        }
        .steps { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; }
        @media (max-width: 768px) { .steps { grid-template-columns: 1fr; gap: 32px; } }
        .step { text-align: center; }
        .step-num {
            width: 48px;
            height: 48px;
            margin: 0 auto 20px;
            background: var(--aegean);
            color: #fff;
            font-family: var(--serif);
            font-size: 1.25rem;
            font-weight: 500;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .step h3 {
            font-family: var(--serif);
            font-size: 1.35rem;
            font-weight: 500;
            color: var(--aegean);
            margin: 0 0 8px;
        }
        .step p { margin: 0; color: #555; font-size: 0.95rem; }

        /* ----- Collection ----- */
        .collection { background: var(--sand); }
        .collection .section-title {
            font-family: var(--serif);
            font-size: clamp(1.75rem, 3.5vw, 2.5rem);
            font-weight: 500;
            color: var(--aegean);
            margin: 0 0 48px;
            text-align: center;
        }
        .products { display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px; }
        @media (max-width: 900px) { .products { grid-template-columns: 1fr; max-width: 380px; margin: 0 auto; } }
        .product-card {
            background: #fff;
            border: 1px solid rgba(14,42,58,0.12);
            border-radius: 8px;
            overflow: hidden;
            transition: box-shadow 0.2s, border-color 0.2s;
        }
        .product-card:hover { box-shadow: 0 12px 40px rgba(0,0,0,0.08); border-color: var(--gold); }
        .product-img {
            aspect-ratio: 3/4;
            background: #e8e4dc;
            object-fit: cover;
            width: 100%;
            display: block;
        }
        .product-body { padding: 28px 24px; }
        .product-title {
            font-family: var(--serif);
            font-size: 1.4rem;
            font-weight: 500;
            color: var(--aegean);
            margin: 0 0 8px;
        }
        .product-desc { font-size: 0.9rem; color: #555; margin: 0 0 16px; line-height: 1.5; }
        .product-price { font-family: var(--serif); font-size: 1.25rem; color: var(--gold); margin: 0 0 20px; font-weight: 500; }
        .btn-preorder {
            display: block;
            width: 100%;
            padding: 14px;
            background: var(--aegean);
            color: #fff;
            font-family: var(--sans);
            font-size: 0.85rem;
            font-weight: 700;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        .btn-preorder:hover { background: #153548; transform: translateY(-1px); }

        /* ----- Integration (Google) ----- */
        .integration {
            background: #fff;
            border-top: 1px solid rgba(14,42,58,0.08);
        }
        .integration-wrap {
            max-width: 560px;
            margin: 0 auto;
            padding: 48px 32px;
            background: var(--sand);
            border: 2px solid var(--gold);
            border-radius: 12px;
            text-align: center;
        }
        .integration h2 {
            font-family: var(--serif);
            font-size: clamp(1.5rem, 2.5vw, 1.85rem);
            font-weight: 500;
            color: var(--aegean);
            margin: 0 0 12px;
        }
        .integration .integration-copy {
            font-size: 1rem;
            color: #555;
            margin: 0 0 28px;
            line-height: 1.5;
        }
        .integration .form-section { text-align: left; margin-bottom: 20px; }
        .integration label {
            display: block;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #666;
            margin-bottom: 6px;
            font-weight: 700;
        }
        .integration input[type="text"],
        .integration input[type="email"] {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid rgba(14,42,58,0.2);
            border-radius: 4px;
            font-family: var(--sans);
            font-size: 1rem;
            background: #fff;
        }
        .integration input:focus {
            outline: none;
            border-color: var(--gold);
        }
        #google-login-btn {
            width: 100%;
            padding: 18px 24px;
            background: var(--aegean);
            color: #fff;
            font-family: var(--sans);
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        #google-login-btn:hover { background: #153548; transform: translateY(-1px); }
        .integration .divider { margin: 20px 0; font-size: 0.7rem; color: #999; text-transform: uppercase; letter-spacing: 0.1em; display: flex; align-items: center; }
        .integration .divider::before, .integration .divider::after { content: ""; flex: 1; height: 1px; background: rgba(14,42,58,0.2); margin: 0 10px; }
        .upload-area {
            border: 2px dashed rgba(14,42,58,0.25);
            padding: 24px;
            border-radius: 4px;
            background: rgba(255,255,255,0.6);
            cursor: pointer;
            margin-bottom: 20px;
        }
        .upload-area p { margin: 0; font-size: 0.85rem; color: #666; }
        #file-input { display: none; }
        #preview-container { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
        .preview-img { width: 48px; height: 48px; object-fit: cover; border-radius: 4px; }
        #submit-btn {
            width: 100%;
            padding: 18px;
            background: var(--gold);
            color: #fff;
            font-family: var(--sans);
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        #submit-btn:hover { background: var(--gold-light); transform: translateY(-1px); }
        .hidden { display: none !important; }
        #sub-header { margin: 0 0 20px; color: #555; }

        /* Loading overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(244,241,234,0.96);
            z-index: 100;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }
        .loading-overlay.visible { display: flex; }
        .loading-overlay .spinner {
            width: 44px;
            height: 44px;
            border: 3px solid rgba(14,42,58,0.2);
            border-top-color: var(--aegean);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        .loading-overlay p { margin: 0; font-family: var(--serif); font-size: 1.1rem; color: var(--aegean); }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ----- Footer ----- */
        footer {
            padding: 48px 24px 32px;
            background: var(--aegean);
            color: rgba(255,255,255,0.85);
            text-align: center;
        }
        .footer-links { display: flex; flex-wrap: wrap; gap: 24px; justify-content: center; margin-bottom: 24px; }
        .footer-links a { color: rgba(255,255,255,0.9); text-decoration: none; font-size: 0.9rem; }
        .footer-links a:hover { text-decoration: underline; }
        .footer-social { display: flex; gap: 20px; justify-content: center; margin-bottom: 28px; }
        .footer-social a { color: rgba(255,255,255,0.9); text-decoration: none; font-size: 0.9rem; }
        .footer-social a:hover { text-decoration: underline; }
        .footer-copy { font-size: 0.8rem; opacity: 0.8; }
    </style>
</head>
<body>

    <!-- 1. Hero -->
    <section class="hero">
        <div class="hero-inner">
            <h1>Your Life, Printed in Ink.</h1>
            <p class="subhead">Stop letting your memories get lost in the cloud. Archa curates your best photos and prints them into museum-quality volumes, automatically.</p>
            <div class="hero-ctas">
                <a href="#integration" class="btn-primary">Start Your Archive</a>
                <a href="weddings.html" class="btn-secondary">View the Gallery</a>
            </div>
        </div>
    </section>

    <!-- 2. Why -->
    <section class="section why">
        <h2 class="section-title">You have 10,000 photos on your phone.</h2>
        <p class="section-copy">When was the last time you held one? We believe photos are meant to be touched, not just scrolled.</p>
    </section>

    <!-- 3. How it works -->
    <section class="section how">
        <h2 class="section-title">How It Works</h2>
        <div class="steps">
            <div class="step">
                <div class="step-num">1</div>
                <h3>Connect</h3>
                <p>Securely link your Google Photos library.</p>
            </div>
            <div class="step">
                <div class="step-num">2</div>
                <h3>Curate</h3>
                <p>Our smart engine finds the best shots—filtering out screenshots, duplicates, and blurry receipts.</p>
            </div>
            <div class="step">
                <div class="step-num">3</div>
                <h3>Create</h3>
                <p>Receive a quarterly or annual volume on your doorstep.</p>
            </div>
        </div>
    </section>

    <!-- 4. The Collection -->
    <section class="section collection">
        <h2 class="section-title">The Collection</h2>
        <div class="products">
            <article class="product-card">
                <img src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=600&q=80" alt="The Annual" class="product-img">
                <div class="product-body">
                    <h3 class="product-title">The Annual</h3>
                    <p class="product-desc">Your entire year, distilled into 200 pages. Hardcover, linen-wrapped.</p>
                    <p class="product-price">$120/year</p>
                    <button type="button" class="btn-preorder">Pre-Order</button>
                </div>
            </article>
            <article class="product-card">
                <img src="https://images.unsplash.com/photo-1512820790803-83ca734da794?w=600&q=80" alt="The Expedition" class="product-img">
                <div class="product-body">
                    <h3 class="product-title">The Expedition</h3>
                    <p class="product-desc">For that one big trip. Japan, Patagonia, The Alps. Dedicated to a single journey.</p>
                    <p class="product-price">$85/book</p>
                    <button type="button" class="btn-preorder">Pre-Order</button>
                </div>
            </article>
            <article class="product-card">
                <img src="https://images.unsplash.com/photo-1589829545856-d10d557cf95f?w=600&q=80" alt="The Archive Subscription" class="product-img">
                <div class="product-body">
                    <h3 class="product-title">The Archive Subscription</h3>
                    <p class="product-desc">Never worry about it again. We print a volume every time you hit 500 great photos.</p>
                    <p class="product-price">$25/month</p>
                    <button type="button" class="btn-preorder">Pre-Order</button>
                </div>
            </article>
        </div>
    </section>

    <!-- 5. Integration (Google Photos) -->
    <section class="section integration" id="integration">
        <div class="integration-wrap">
            <h2>Ready to see your draft?</h2>
            <p class="integration-copy">Connect Google Photos to preview your first book.</p>

            <div id="loading-overlay" class="loading-overlay" aria-live="polite">
                <div class="spinner"></div>
                <p>Linking your photos…</p>
            </div>

            <form name="archa-alpha-onboarding" method="POST" data-netlify="true" id="onboarding-form" enctype="multipart/form-data" action="/">
                <div class="form-section">
                    <label for="user-name">Full Name</label>
                    <input type="text" name="name" id="user-name" placeholder="Your name" required>
                </div>
                <div class="form-section">
                    <label for="user-email">Email</label>
                    <input type="email" name="email" id="user-email" placeholder="you@example.com" required>
                </div>
                <button type="button" id="google-login-btn">Connect Google Photos</button>
                <div class="divider">or</div>
                <div class="upload-area" onclick="document.getElementById('file-input').click()">
                    <p>Upload from device</p>
                    <input type="file" name="manual-photos" id="file-input" multiple accept="image/*">
                    <div id="preview-container"></div>
                </div>
                <input type="hidden" name="view-photos-link" id="view-photos-link-input" value="">
                <input type="hidden" name="google-photos-count" id="google-photos-count-input" value="">
                <button type="submit" id="submit-btn" class="btn-primary" style="margin-top:8px;">Submit Archive</button>
            </form>
            <p id="success-message" class="hidden" style="margin:0; color:#555;"></p>
        </div>
    </section>

    <!-- 6. Footer -->
    <footer>
        <div class="footer-links">
            <a href="#">Support</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
        </div>
        <div class="footer-social">
            <a href="#" aria-label="Instagram">Instagram</a>
            <a href="#" aria-label="Twitter">Twitter</a>
        </div>
        <p class="footer-copy">© 2026 Archa</p>
    </footer>

    <script src="https://accounts.google.com/gsi/client"></script>
    <script>
        const CLIENT_ID = '395230076534-7p1jg57bplj9j74e1adk2uu0r9n4qujv.apps.googleusercontent.com';
        const PICKER_API = 'https://photospicker.googleapis.com/v1';
        let tokenClient;

        window.onload = function() {
            if (window.location.protocol === 'file:') {
                console.warn('This page is open from file://. Form submit and Google sign-in will fail. Run a local server or deploy to Netlify.');
            }
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID,
                scope: 'https://www.googleapis.com/auth/photospicker.mediaitems.readonly',
                callback: function(resp) {
                    if (resp.error) {
                        console.error('Google sign-in error:', resp);
                        alert('Sign-in failed: ' + (resp.error_description || resp.error || 'Unknown error') + '. Try deploying to Netlify or running a local server.');
                        return;
                    }
                    openPhotosPicker(resp.access_token);
                },
            });
        };

        function parseDuration(s) {
            if (!s || typeof s !== 'string') return 0;
            var match = s.match(/^([\d.]+)s$/);
            return match ? parseFloat(match[1]) * 1000 : 2000;
        }

        function openPhotosPicker(accessToken) {
            fetch(PICKER_API + '/sessions', {
                method: 'POST',
                headers: { 'Authorization': 'Bearer ' + accessToken, 'Content-Type': 'application/json' },
                body: JSON.stringify({}),
            })
            .then(function(r) {
                if (!r.ok) return r.json().then(function(j) { return Promise.reject(new Error(j.error && j.error.message || 'Session create failed ' + r.status)); });
                return r.json();
            })
            .then(function(session) {
                var pickerUri = session.pickerUri + (session.pickerUri.indexOf('/autoclose') === -1 ? '/autoclose' : '');
                var sessionId = session.id;
                var pollInterval = parseDuration(session.pollingConfig && session.pollingConfig.pollInterval) || 2000;
                var timeoutIn = parseDuration(session.pollingConfig && session.pollingConfig.timeoutIn) || 300000;
                var overlay = document.getElementById('loading-overlay');
                if (overlay) overlay.classList.add('visible');
                window.open(pickerUri, 'photos-picker', 'width=800,height=600');
                var start = Date.now();
                function poll() {
                    if (Date.now() - start > timeoutIn) { hideLoading(); return; }
                    fetch(PICKER_API + '/sessions/' + sessionId, { headers: { 'Authorization': 'Bearer ' + accessToken } })
                    .then(function(r) { return r.json(); })
                    .then(function(data) {
                        if (data.mediaItemsSet) {
                            fetch(PICKER_API + '/sessions/' + sessionId, { method: 'DELETE', headers: { 'Authorization': 'Bearer ' + accessToken } }).catch(function() {});
                            fetchPickedMediaItems(accessToken, sessionId).then(handleSuccess);
                            return;
                        }
                        setTimeout(poll, pollInterval);
                    })
                    .catch(function(err) { console.error('Picker poll error:', err); setTimeout(poll, pollInterval); });
                }
                setTimeout(poll, pollInterval);
            })
            .catch(function(err) {
                hideLoading();
                console.error('Photos Picker error:', err);
                alert('Could not open Google Photos. Enable "Google Photos Picker API" in Google Cloud Console and add this site to Authorized JavaScript origins.');
            });
        }

        function fetchPickedMediaItems(accessToken, sessionId) {
            var all = [];
            function fetchPage(pageToken) {
                var url = PICKER_API + '/mediaItems?sessionId=' + encodeURIComponent(sessionId) + (pageToken ? '&pageToken=' + encodeURIComponent(pageToken) : '') + '&pageSize=100';
                return fetch(url, { headers: { 'Authorization': 'Bearer ' + accessToken } })
                    .then(function(r) { return r.json(); })
                    .then(function(data) {
                        if (data.mediaItems) all.push.apply(all, data.mediaItems);
                        if (data.nextPageToken) return fetchPage(data.nextPageToken);
                        return all;
                    });
            }
            return fetchPage();
        }

        function hideLoading() {
            var overlay = document.getElementById('loading-overlay');
            if (overlay) overlay.classList.remove('visible');
        }

        function handleSuccess(pickedItems) {
            pickedItems = pickedItems || [];
            document.getElementById('onboarding-form').classList.add('hidden');
            var count = pickedItems.length;
            var msg = document.getElementById('success-message');
            msg.textContent = count
                ? count + ' photo' + (count !== 1 ? 's' : '') + ' linked. Our curators will reach out within 24 hours.'
                : 'Archive linked. Our curators will reach out within 24 hours.';
            msg.classList.remove('hidden');
            var form = document.getElementById('onboarding-form');
            var viewLinkEl = document.getElementById('view-photos-link-input');
            var countEl = document.getElementById('google-photos-count-input');
            var viewPhotosPageUrl = '';
            if (pickedItems.length) {
                if (countEl) countEl.value = String(pickedItems.length);
                var items = pickedItems.map(function(item) {
                    var mediaFile = item.mediaFile || item.media_file || {};
                    return { id: item.id, baseUrl: mediaFile.baseUrl || mediaFile.base_url || '', mimeType: mediaFile.mimeType || mediaFile.mime_type || '' };
                });
                var viewUrls = items.map(function(i) { return i.baseUrl ? i.baseUrl + '=w800' : ''; }).filter(Boolean);
                if (viewUrls.length) {
                    try {
                        viewPhotosPageUrl = new URL('thank-you.html', window.location.href).href + '#' + encodeURIComponent(btoa(JSON.stringify(viewUrls)));
                        if (viewLinkEl) viewLinkEl.value = viewPhotosPageUrl;
                    } catch (e) {}
                }
            }
            var formData = new FormData(form);
            formData.append('form-name', 'archa-alpha-onboarding');
            if (pickedItems.length) {
                var items = pickedItems.map(function(item) {
                    var mediaFile = item.mediaFile || item.media_file || {};
                    return { id: item.id, baseUrl: mediaFile.baseUrl || mediaFile.base_url || '', mimeType: mediaFile.mimeType || mediaFile.mime_type || '' };
                });
                formData.append('google-photos-items', JSON.stringify(items));
            }
            fetch(form.getAttribute('action') || '/', { method: 'POST', body: formData })
            .then(function() {
                if (viewPhotosPageUrl) window.location.href = viewPhotosPageUrl;
                else hideLoading();
            })
            .catch(function(err) {
                console.error('Submit failed:', err);
                hideLoading();
                document.getElementById('onboarding-form').classList.add('hidden');
                var msg = document.getElementById('success-message');
                msg.textContent = 'Archive linked. If this didn’t redirect, try again when the site is live on Netlify.';
                msg.classList.remove('hidden');
            });
        }

        document.getElementById('google-login-btn').addEventListener('click', function() {
            if (!document.getElementById('user-name').value) { alert('Enter your name first.'); return; }
            tokenClient.requestAccessToken({ prompt: 'consent' });
        });

        document.getElementById('file-input').addEventListener('change', function() {
            var preview = document.getElementById('preview-container');
            preview.innerHTML = '';
            var files = this.files;
            for (var i = 0; i < files.length; i++) {
                (function(file) {
                    var reader = new FileReader();
                    reader.onload = function(e) {
                        var img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'preview-img';
                        preview.appendChild(img);
                    };
                    reader.readAsDataURL(file);
                })(files[i]);
            }
        });
    </script>
</body>
</html>
